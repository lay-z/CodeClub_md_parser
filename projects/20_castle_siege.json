{
    "number": 20,
    "show": true,
    "name": "castle_siege",
    "title": "Castle Siege",
    "description": "In this project you're going to make a game in which you have to throw fireballs at a target. You'll use the mouse pointer to angle the fireball and the spacebar to choose the fireball's power.\n\n<div class=\"scratch-preview\">\n  <iframe allowtransparency=\"true\" width=\"485\" height=\"402\" src=\"http://scratch.mit.edu/projects/embed/35172420/?autostart=true\" frameborder=\"0\"></iframe>\n  \n</div>",
    "image": "Additional_Projects/Snowball_Fight/snow-final.png",
    "steps": [
        {
            "number": 1,
            "title": "Making a fireball",
            "image": "castle_siege/fireball.png",
            "description": "Make a fireball to throw around your stage",
            "components": [
                {
                    "text": "Open the **Scratch Starter Project**"
                },
                {
                    "text": "Make the fireball point towards the players mouse until they press the space bar using the following code",
                    "image": "castle_siege/aim.png"
                },
                {
                    "blocks": "when flag clicked\n\t\twait (0.5) secs\n\t\tgo to x:(-200) y:(-100)\n\t\tpoint in direction (90 v)\n\t\tswitch costume to [fireball-aim v]\n\t\trepeat until <key [space v] pressed?>\n\t\t\tpoint towards [mouse-pointer v]\n\t\tend"
                },
                {
                    "text": "**Click the green flag** - Does your fireball follow the mouse until you press the space bar?"
                }
            ]
        },
        {
            "number": 2,
            "title": "Setting the fireball power",
            "image": "castle_siege/slider.png",
            "description": "Allow the player to deicde on how powerful the fireball should be thrown",
            "components": [
                {
                    "text": "Create a new variable called `power`",
                    "image": "scratch/make_a_variable.png",
                    "blocks": "(power)"
                },
                {
                    "text": "Right-click (or hold Shift and left-click) on the variable display and click `slider`",
                    "image": "scratch/slider.png"
                },
                {
                    "text": "Drag the variable display to the bottom of the stage, near the fireball",
                    "image": "castle_siege/slider.png"
                },
                {
                    "text": "Add this line to your existing code to set your new `power` variable to 0 when the flag is clicked",
                    "blocks": "set [power v] to (0)"
                },
                {
                    "text": "Use the following script to **set the power of the fireball** *after the direction has been chosen*"
                },
                {
                    "blocks": "repeat until < not <key [space v] pressed?> >\n\t\t\tchange [power v] by (1)\n\t\t\twait (0.1) secs\n\t\tend"
                },
                {
                    "text": "This code means that you have to **keep the space bar held down** after choosing the direction, to choose the fireball's power"
                },
                {
                    "text": "**Click the green flag** - Can you choose the fireball angle and power?"
                }
            ]
        },
        {
            "number": 3,
            "title": "Throwing the fireball",
            "image": "castle_siege/throw.png",
            "description": "Allow the player to throw the fireball once its direction and power are selected",
            "components": [
                {
                    "text": "Add the following code to the end of your fireball script to broadcast that you're throwing a fireball"
                },
                {
                    "blocks": "broadcast [throw v] and wait"
                },
                {
                    "text": "Add the following script to your fireball, to move until it reaches the edge of the stage"
                },
                {
                    "blocks": "when I receive [throw v]\n\t\tswitch costume to [fireball v]\n\t\trepeat until < touching [edge v]? >\n\t\t\tmove (power) steps\n\t\tend\n\t\thide"
                },
                {
                    "text": "Add this block to the begining of your fireball script to `show` the fireball",
                    "blocks": "show"
                },
                {
                    "text": "**Click the green flag** - Can you make your fireball move at different angles and different speeds?"
                }
            ]
        },
        {
            "number": 4,
            "title": "Realistic movement",
            "description": "You now have a fireball, but let's make it move a bit more realistically.",
            "components": [
                {
                    "text": "Change your fireball code to look like the following, so that the fireball can't be thrown with a power greater than 20"
                },
                {
                    "blocks": "repeat until< not <key [space v] pressed?> >\n\t\t\tif < (power) < [20] > then\n\t\t\t\tchange [power v] by (1)\n\t\t\t\twait (0.1) secs\n\t\t\tend\n\t\tend"
                },
                {
                    "text": "Test out your fireball again, and you'll see that the power never gets above 20."
                },
                {
                    "text": "Right-click on your power variable, and click 'set slider min and max' to **set the maximum value for the variable's slider**",
                    "image": "scratch/set_slider_min_max.png"
                },
                {
                    "text": "Add this code block to your fireball's `when I receive [throw]` code You can also slow down the fireball, by reducing the power slightly as it flies through the air. "
                },
                {
                    "blocks": "change [power v] by (-0.25)"
                },
                {
                    "blocks": "if < (power) > (0) > then\n\t\t\tchange [power v] by (-0.25)\n\t\tend",
                    "text": "Test this new code - does it work as you expected? You may notice that the power keeps reducing, and eventually the fireball moves backwards!\n\n\tTo fix this, you can add an `if` block to your code, so that the power is only lowered if it is above 0:"
                },
                {
                    "blocks": "when I receive [throw v]\n\t\trepeat until <touching [edge v]?>\n\t\t\tchange y by (-5)\n\t\tend",
                    "text": "You're nearly there, but you also need to add some gravity to your fireball, so that it falls to the ground. You can add gravity by just moving the fireball down continuously with this script:"
                },
                {
                    "text": "Test out your fireball again, and you should see that your fireball moves much more realistically."
                }
            ]
        },
        {
            "number": 5,
            "title": "The target",
            "description": "Let's add in a target for your fireballs!",
            "components": [
                {
                    "image": "Additional_Projects/Snowball_Fight/snow-bear.png",
                    "text": "+ Add in another sprite to your project."
                },
                {
                    "blocks": "when flag clicked\n\t\tforever\n\t\t\tif < touching [fireball v]? > then\n\t\t\t\tsay [You got me!] for (1) secs\n\t\t\tend\n\t\tend",
                    "text": "Add this code to your new sprite, so that it says \"You got me!\" when it gets hit:"
                },
                {
                    "image": "Additional_Projects/Snowball_Fight/snow-hit.png",
                    "text": "Test out your new code."
                },
                {
                    "blocks": "broadcast [new shot v]",
                    "text": "Let's do a couple of things to make the game harder. First, let's move the bear each time the player throws the fireball.\n\n\tTo do this, first add a `broadcast` loop. This will let your bear know that a new shot is about to be taken."
                },
                {
                    "blocks": "when I receive [new shot v]\n\t\tset x to (pick random (0) to (200))",
                    "text": "When your bear receives this message, move it to a new random position with this code:"
                },
                {
                    "text": "Test your project by throwing a few fireballs. Does your bear move position each time?"
                },
                {
                    "image": "Additional_Projects/Snowball_Fight/snow-rock.png",
                    "text": "You can also make your game harder by adding a rock in front of your fireball."
                },
                {
                    "image": "Additional_Projects/Snowball_Fight/snow-ball.png",
                    "text": "You can now change your fireball code, to stop when it touches the edge of the screen _or_ when it touches the rock. Here's how your fireball code should look:"
                },
                {
                    "image": "Additional_Projects/Snowball_Fight/snow-small.png",
                    "text": "Finally, you can make your game harder by making your fireball and your bear smaller."
                }
            ]
        }
    ]
}